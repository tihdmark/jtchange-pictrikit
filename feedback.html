<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F3GLBLC9JW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-F3GLBLC9JW', { send_page_view: true });
</script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Feedback & Official Responses - PictriKit</title>
  <meta name="description" content="Read user feedback, feature requests, and official responses from the PictriKit team. Share your suggestions and see how we respond to community input.">
  <link rel="canonical" href="https://www.pictrikit.com/feedback.html">
  <meta property="og:title" content="User Feedback & Official Responses - PictriKit">
  <meta property="og:description" content="Community feedback and official responses from PictriKit. Share your thoughts and see our replies.">
  <meta property="og:url" content="https://www.pictrikit.com/feedback.html">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.pictrikit.com/assets/images/og-image.svg">
  <meta property="og:site_name" content="PictriKit">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="User Feedback & Official Responses - PictriKit">
  <meta name="twitter:description" content="Community feedback and official responses from PictriKit.">
  <meta name="twitter:image" content="https://www.pictrikit.com/assets/images/og-image.svg">
  
  <!-- JSON-LD: DiscussionForumPosting + WebPage + BreadcrumbList -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebPage",
        "@id": "https://www.pictrikit.com/feedback.html",
        "url": "https://www.pictrikit.com/feedback.html",
        "name": "User Feedback & Official Responses - PictriKit",
        "description": "Read user feedback, feature requests, and official responses from the PictriKit team. Share your suggestions and see how we respond to community input.",
        "isPartOf": {
          "@type": "WebSite",
          "name": "PictriKit",
          "url": "https://www.pictrikit.com/"
        },
        "about": {
          "@type": "WebApplication",
          "name": "PictriKit",
          "url": "https://www.pictrikit.com/app.html"
        },
        "mainEntity": {
          "@type": "DiscussionForumPosting",
          "headline": "PictriKit Community Feedback Forum",
          "url": "https://www.pictrikit.com/feedback.html",
          "datePublished": "2026-01-01",
          "dateModified": "2026-01-13",
          "author": {
            "@type": "Organization",
            "name": "PictriKit Team",
            "url": "https://www.pictrikit.com/"
          },
          "text": "This page collects feedback, suggestions, and bug reports from PictriKit users. Each message may include an official response from our team.",
          "interactionStatistic": {
            "@type": "InteractionCounter",
            "interactionType": "https://schema.org/CommentAction",
            "userInteractionCount": "50"
          }
        }
      },
      {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://www.pictrikit.com/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Feedback",
            "item": "https://www.pictrikit.com/feedback.html"
          }
        ]
      },
      {
        "@type": "Organization",
        "name": "PictriKit",
        "url": "https://www.pictrikit.com/",
        "logo": "https://www.pictrikit.com/favicon.svg",
        "sameAs": [],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "customer support",
          "url": "https://www.pictrikit.com/contact.html"
        }
      }
    ]
  }
  </script>
  
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', -apple-system, sans-serif; background: #f8fafc; color: #334155; line-height: 1.6; min-height: 100vh; }
    .container { max-width: 720px; margin: 0 auto; padding: 0 1rem; }
    header { background: white; border-bottom: 1px solid #e5e7eb; position: sticky; top: 0; z-index: 50; }
    header .container { display: flex; justify-content: space-between; align-items: center; height: 64px; }
    .logo { display: flex; align-items: center; gap: 0.5rem; text-decoration: none; }
    .logo .material-icons-round { color: #007AFF; font-size: 1.75rem; }
    .logo span { font-weight: 700; font-size: 1.125rem; color: #111827; }
    .back-link { color: #6b7280; text-decoration: none; font-size: 0.875rem; display: flex; align-items: center; gap: 0.25rem; }
    .back-link:hover { color: #007AFF; }
    main { padding: 3rem 0 4rem; }
    h1 { font-size: 1.75rem; font-weight: 700; color: #111827; margin-bottom: 0.5rem; }
    .page-intro { color: #4b5563; margin-bottom: 2rem; font-size: 0.9375rem; line-height: 1.7; }
    .page-header { margin-bottom: 2rem; }
    .form-heading { font-size: 1.125rem; font-weight: 600; color: #374151; margin-bottom: 1rem; }
    .admin-badge { display: inline-flex; align-items: center; gap: 0.25rem; background: #fef3c7; color: #92400e; font-size: 0.75rem; font-weight: 600; padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem; }
    .feedback-form { background: white; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; border: 1px solid #e5e7eb; }
    .form-label { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem; }
    .form-textarea { width: 100%; min-height: 120px; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 0.9375rem; font-family: inherit; resize: vertical; outline: none; transition: border-color 0.2s; }
    .form-textarea:focus { border-color: #007AFF; }
    .form-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; }
    .char-count { font-size: 0.75rem; color: #9ca3af; }
    .submit-btn { padding: 0.625rem 1.25rem; background: #007AFF; color: white; border: none; border-radius: 8px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: background 0.2s; }
    .submit-btn:hover { background: #0066DD; }
    .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .feedback-list-section { margin-top: 2.5rem; }
    .messages-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
    .messages-title { font-size: 1.125rem; font-weight: 600; color: #374151; margin: 0; }
    .messages-count { font-size: 0.75rem; color: #9ca3af; }
    .message-card { background: white; border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; border: 1px solid #e5e7eb; }
    .message-card.deleted { opacity: 0.5; background: #fef2f2; }
    .message-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.75rem; }
    .message-user { display: flex; align-items: center; gap: 0.5rem; }
    .user-avatar { width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #007AFF, #5856D6); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.75rem; font-weight: 600; }
    .user-name { font-weight: 500; color: #6b7280; font-size: 0.8125rem; margin: 0; }
    .message-time { font-size: 0.75rem; color: #9ca3af; }
    .message-body { margin-bottom: 0.5rem; }
    .message-content { color: #1f2937; font-size: 0.9375rem; line-height: 1.7; margin: 0; white-space: pre-wrap; }
    .admin-actions { display: flex; gap: 0.5rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid #f3f4f6; }
    .admin-btn { padding: 0.375rem 0.75rem; font-size: 0.75rem; font-weight: 500; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 0.25rem; transition: all 0.2s; }
    .admin-btn .material-icons-round { font-size: 14px; }
    .admin-btn.reply-btn { background: #eff6ff; color: #1d4ed8; }
    .admin-btn.reply-btn:hover { background: #dbeafe; }
    .admin-btn.delete-btn { background: #fef2f2; color: #dc2626; }
    .admin-btn.delete-btn:hover { background: #fee2e2; }
    .admin-reply-form { margin-top: 0.75rem; padding: 0.75rem; background: #f9fafb; border-radius: 8px; }
    .admin-reply-form textarea { width: 100%; min-height: 80px; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 6px; font-size: 0.8125rem; font-family: inherit; resize: vertical; outline: none; }
    .admin-reply-form textarea:focus { border-color: #007AFF; }
    .admin-reply-form-actions { display: flex; justify-content: flex-end; gap: 0.5rem; margin-top: 0.5rem; }
    .admin-reply-form-actions button { padding: 0.375rem 0.75rem; font-size: 0.75rem; font-weight: 500; border-radius: 6px; cursor: pointer; border: none; }
    .admin-reply-form-actions .cancel-btn { background: #f3f4f6; color: #6b7280; }
    .admin-reply-form-actions .save-btn { background: #007AFF; color: white; }
    .admin-reply-form-actions .save-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .reply-card { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid #007AFF; margin-top: 1rem; padding: 1rem 1.25rem; border-radius: 0 8px 8px 0; }
    .reply-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.625rem; }
    .creator-badge { background: #007AFF; color: white; font-size: 0.625rem; font-weight: 700; padding: 0.1875rem 0.5rem; border-radius: 4px; text-transform: uppercase; letter-spacing: 0.025em; }
    .reply-name { font-weight: 600; color: #0369a1; font-size: 0.875rem; margin: 0; }
    .reply-content { color: #0c4a6e; font-size: 0.9375rem; line-height: 1.7; margin: 0; white-space: pre-wrap; }
    .empty-state { text-align: center; padding: 3rem 1rem; color: #9ca3af; }
    .empty-state .material-icons-round { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }
    .loading { text-align: center; padding: 2rem; color: #9ca3af; }
    .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: #111827; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.875rem; opacity: 0; transition: opacity 0.3s; z-index: 1000; }
    .toast.show { opacity: 1; }
    .toast.error { background: #dc2626; }
    
    /* Creator Pinned Card */
    .creator-pinned { background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; border: 1px solid #fde047; position: relative; }
    .creator-pinned::before { content: 'üìå'; position: absolute; top: -8px; right: 16px; font-size: 1.25rem; }
    .creator-pinned-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
    .creator-pinned-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b, #d97706); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.125rem; }
    .creator-pinned-meta { flex: 1; }
    .creator-pinned-name { font-weight: 600; color: #92400e; font-size: 0.9375rem; margin: 0; display: flex; align-items: center; gap: 0.5rem; }
    .creator-pinned-badge { background: #f59e0b; color: white; font-size: 0.625rem; font-weight: 700; padding: 0.125rem 0.375rem; border-radius: 3px; text-transform: uppercase; }
    .creator-pinned-label { font-size: 0.75rem; color: #a16207; margin: 0; }
    .creator-pinned-content { color: #78350f; font-size: 0.9375rem; line-height: 1.8; }
    .creator-pinned-content p { margin-bottom: 0.75rem; }
    .creator-pinned-content ul { margin: 0.75rem 0; padding-left: 1.25rem; }
    .creator-pinned-content li { margin-bottom: 0.25rem; }
    .creator-pinned-heart { color: #dc2626; }
    
    /* Share Section */
    .share-section { margin-top: 1.25rem; padding-top: 1rem; border-top: 1px solid #fde68a; }
    .share-label { font-size: 0.75rem; color: #a16207; margin-bottom: 0.5rem; font-weight: 500; }
    .share-buttons { display: flex; gap: 0.5rem; flex-wrap: wrap; }
    .share-btn { display: inline-flex; align-items: center; gap: 0.375rem; padding: 0.375rem 0.75rem; border-radius: 6px; font-size: 0.75rem; font-weight: 500; text-decoration: none; border: none; cursor: pointer; transition: all 0.2s; }
    .share-btn-x { background: #0f172a; color: white; }
    .share-btn-x:hover { background: #1e293b; }
    .share-btn-reddit { background: #ff4500; color: white; }
    .share-btn-reddit:hover { background: #e03d00; }
    .share-btn-copy { background: #e5e7eb; color: #374151; }
    .share-btn-copy:hover { background: #d1d5db; }
    .share-btn svg { width: 14px; height: 14px; fill: currentColor; }
    
    footer { background: #111827; color: white; padding: 2rem 0; margin-top: auto; }
    footer .container { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
    footer a { color: #9ca3af; text-decoration: none; font-size: 0.875rem; }
    footer a:hover { color: white; }
    @media (max-width: 640px) {
      h1 { font-size: 1.5rem; }
      .message-header { flex-direction: column; gap: 0.5rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="/" class="logo">
        <img src="/favicon.svg" alt="PictriKit" width="28" height="28" style="width:1.75rem;height:1.75rem;">
        <span>PictriKit</span>
      </a>
      <a href="/app.html" class="back-link">
        <span class="material-icons-round" style="font-size:18px;">arrow_back</span>
        Back to Editor
      </a>
    </div>
  </header>

  <main>
    <div class="container">
      <header class="page-header">
        <h1>User Feedback & Official Responses<span class="admin-badge" id="admin-badge" style="display:none;"><span class="material-icons-round" style="font-size:12px;">admin_panel_settings</span>Admin Mode</span></h1>
        <p class="page-intro">This page collects feedback, suggestions, and bug reports from PictriKit users. Each message may include an official response from our team. We read every submission and respond when we can help or when updates are planned.</p>
      </header>
      
      <section class="feedback-form" aria-label="Submit your feedback">
        <h2 class="form-heading">Share Your Feedback</h2>
        <label class="form-label" for="feedback-input">Your message</label>
        <textarea class="form-textarea" id="feedback-input" rows="4" maxlength="1000" placeholder="Describe your suggestion, question, or issue..."></textarea>
        <div class="form-footer">
          <span class="char-count"><span id="char-count">0</span> / 1000</span>
          <button class="submit-btn" id="submit-btn">Send Feedback</button>
        </div>
      </section>
      
      <!-- Creator Pinned Message -->
      <article class="creator-pinned" aria-label="Message from the creator">
        <header class="creator-pinned-header">
          <div class="creator-pinned-avatar">üë§</div>
          <div class="creator-pinned-meta">
            <h3 class="creator-pinned-name">From the Creator <span class="creator-pinned-badge">Pinned</span></h3>
            <p class="creator-pinned-label">Why I built PictriKit</p>
          </div>
        </header>
        <div class="creator-pinned-content">
          <p>PictriKit is designed to be:</p>
          <ul>
            <li>Simple</li>
            <li>Functional</li>
            <li>No login</li>
            <li>No data retention</li>
            <li>No learning curve</li>
          </ul>
          <p>If you open it, you already know how to use it.</p>
          <p>I built this because most screenshot tools I tried were either too complex, required sign-ups, or produced messy results. PictriKit uses a layout-based approach ‚Äî in my experience, the most reliable way to combine screenshots cleanly while preserving resolution.</p>
          <p>This is a new project, so bugs and edge cases may still exist. That's why this feedback page exists. If you encounter any issues, have ideas, or think something can be improved, please leave a message. I read and reply to feedback and fix problems as they come.</p>
          <p>If PictriKit is useful to you, sharing it with others would mean a lot. Your feedback and shares are what keep this project moving forward.</p>
          <p>Thank you for being here <span class="creator-pinned-heart">‚ù§Ô∏è</span></p>
        </div>
        <div class="share-section">
          <p class="share-label">Share PictriKit</p>
          <div class="share-buttons">
            <a href="https://twitter.com/intent/tweet?text=PictriKit%20%E2%80%93%20Simple%20Image%20Tools%2C%20No%20Sign-up%0A%0AA%20lightweight%20image%20utility%20site%20for%20quick%20tasks%20%E2%80%94%20no%20accounts%2C%20no%20tracking.&url=https%3A%2F%2Fwww.pictrikit.com" target="_blank" rel="noopener" class="share-btn share-btn-x">
              <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
              Post on X
            </a>
            <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.pictrikit.com&title=PictriKit%20%E2%80%93%20Simple%20Image%20Tools%2C%20No%20Sign-up" target="_blank" rel="noopener" class="share-btn share-btn-reddit">
              <svg viewBox="0 0 24 24"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
              Share on Reddit
            </a>
            <button class="share-btn share-btn-copy" onclick="navigator.clipboard.writeText('https://www.pictrikit.com').then(function(){document.getElementById('toast').textContent='Link copied!';document.getElementById('toast').className='toast show';setTimeout(function(){document.getElementById('toast').className='toast';},2000);})">
              <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
              Copy Link
            </button>
          </div>
        </div>
      </article>
      
      <section class="feedback-list-section" aria-label="User feedback and responses">
        <header class="messages-header">
          <h2 class="messages-title">Community Feedback</h2>
          <span class="messages-count" id="messages-count"></span>
        </header>
        <div id="messages-list" role="feed" aria-label="Feedback messages">
          <p class="loading">Loading messages...</p>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="container">            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb;">
                <div style="font-size: 0.75rem; color: #6b7280; margin-bottom: 0.5rem;">Popular Tools:</div>
                <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; font-size: 0.75rem;">
                    <a href="/compare-screenshots.html" style="color: #6b7280; text-decoration: none;">Compare Screenshots</a>
                    <a href="/combine-chat-screenshots.html" style="color: #6b7280; text-decoration: none;">Combine Chat</a>
                    <a href="/before-after-screenshot.html" style="color: #6b7280; text-decoration: none;">Before &amp; After</a>
                    <a href="/put-two-screenshots-together.html" style="color: #6b7280; text-decoration: none;">Put Two Together</a>
                    <a href="/stack-screenshots-vertically.html" style="color: #6b7280; text-decoration: none;">Stack Vertically</a>
                    <a href="/screenshot-grid-layout.html" style="color: #6b7280; text-decoration: none;">Grid Layout</a>
                </div>
            </div>
      <span style="font-size:0.875rem;color:#9ca3af;">&copy; 2026 PictriKit</span>
      <div style="display:flex;gap:1.5rem;">
        <a href="/privacy.html">Privacy</a>
        <a href="/terms.html">Terms</a>
        <a href="/contact.html">Contact</a>
      </div>
    </div>
  </footer>

  <div class="toast" id="toast"></div>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM
    var messagesList = document.getElementById('messages-list');
    var messagesCount = document.getElementById('messages-count');
    var adminBadge = document.getElementById('admin-badge');
    var input = document.getElementById('feedback-input');
    var charCount = document.getElementById('char-count');
    var submitBtn = document.getElementById('submit-btn');
    var toast = document.getElementById('toast');

    // State
    var isAdmin = false;
    var adminToken = null;
    var feedbackData = [];

    // Utils
    function showToast(msg, err) {
      toast.textContent = msg;
      toast.className = 'toast show' + (err ? ' error' : '');
      setTimeout(function() { toast.className = 'toast'; }, 3000);
    }

    function esc(s) {
      var d = document.createElement('div');
      d.textContent = s || '';
      return d.innerHTML;
    }

    function timeAgo(ts) {
      if (!ts) return '';
      var d = new Date(ts), now = new Date(), diff = now - d;
      if (diff < 60000) return 'Just now';
      if (diff < 3600000) return Math.floor(diff/60000) + 'm ago';
      if (diff < 86400000) return Math.floor(diff/3600000) + 'h ago';
      return d.toLocaleDateString('en-US', {month:'short',day:'numeric'});
    }

    function getUserId() {
      var id = localStorage.getItem('pictrikit_user_id');
      if (!id) {
        var adj = ['Happy','Swift','Clever','Bright','Cool'];
        var noun = ['Panda','Eagle','Tiger','Fox','Wolf'];
        id = adj[Math.floor(Math.random()*5)] + noun[Math.floor(Math.random()*5)] + Math.floor(Math.random()*1000);
        localStorage.setItem('pictrikit_user_id', id);
      }
      return id;
    }

    // Admin Mode (simplified without fetch)
    function initAdminMode() {
      console.log('[Admin] initAdminMode called');
      
      // 1. Check URL for admin token
      var url = new URLSearchParams(window.location.search);
      var t = url.get('admin');
      console.log('[Admin] URL token:', t ? 'present' : 'none');
      
      if (t) {
        localStorage.setItem('pictrikit_admin_token', t);
        history.replaceState({}, '', location.pathname);
        console.log('[Admin] Token saved to localStorage');
      }
      
      // 2. Check localStorage for token
      adminToken = localStorage.getItem('pictrikit_admin_token');
      console.log('[Admin] localStorage token:', adminToken ? ('found: ' + adminToken.substring(0,4) + '...') : 'none');
      
      // 3. Enable Admin Mode
      if (adminToken && adminToken.length > 0) {
        isAdmin = true;
        document.body.classList.add('admin-mode');
        if (adminBadge) {
          adminBadge.style.display = 'inline-flex';
        }
        console.log('[Admin] Admin mode ENABLED');
      } else {
        console.log('[Admin] Admin mode disabled (no token)');
      }
    }

    // Render
    function renderFeedback(list) {
      feedbackData = list;
      if (!list || list.length === 0) {
        messagesList.innerHTML = '<div class="empty-state"><span class="material-icons-round">chat_bubble_outline</span><p>No messages yet.</p></div>';
        messagesCount.textContent = '';
        return;
      }
      messagesCount.textContent = list.length + ' message' + (list.length > 1 ? 's' : '');
      var html = '';
      for (var i = 0; i < list.length; i++) {
        var m = list[i];
        var initials = (m.username || 'AN').slice(0,2).toUpperCase();
        var replyHtml = m.reply ? '<aside class="reply-card"><header class="reply-header"><span class="creator-badge">Official</span><h4 class="reply-name">PictriKit Team</h4></header><p class="reply-content">' + esc(m.reply) + '</p></aside>' : '';
        var adminHtml = isAdmin ? '<div class="admin-actions"><button class="admin-btn reply-btn" data-id="' + m.id + '"><span class="material-icons-round">reply</span>' + (m.reply ? 'Edit' : 'Reply') + '</button><button class="admin-btn delete-btn" data-id="' + m.id + '"><span class="material-icons-round">delete</span>Delete</button></div>' : '';
        html += '<article class="message-card" data-id="' + m.id + '"><header class="message-header"><div class="message-user"><div class="user-avatar">' + initials + '</div><h3 class="user-name">' + esc(m.username) + '</h3></div><time class="message-time">' + timeAgo(m.created_at) + '</time></header><div class="message-body"><p class="message-content">' + esc(m.content) + '</p></div>' + replyHtml + adminHtml + '</article>';
      }
      messagesList.innerHTML = html;
      bindAdminEvents();
    }

    function bindAdminEvents() {
      if (!isAdmin) return;
      var rBtns = messagesList.querySelectorAll('.reply-btn');
      var dBtns = messagesList.querySelectorAll('.delete-btn');
      for (var i = 0; i < rBtns.length; i++) {
        rBtns[i].onclick = function() { openReplyForm(this.dataset.id); };
      }
      for (var j = 0; j < dBtns.length; j++) {
        dBtns[j].onclick = function() { doDelete(this.dataset.id); };
      }
    }

    function openReplyForm(id) {
      var card = document.querySelector('[data-id="' + id + '"]');
      if (!card || card.querySelector('.admin-reply-form')) return;
      var item = feedbackData.find(function(x) { return x.id === id; });
      var form = document.createElement('div');
      form.className = 'admin-reply-form';
      form.innerHTML = '<textarea rows="3" maxlength="2000">' + esc(item && item.reply || '') + '</textarea><div class="admin-reply-form-actions"><button class="cancel-btn">Cancel</button><button class="save-btn">Save</button></div>';
      form.querySelector('.cancel-btn').onclick = function() { form.remove(); };
      form.querySelector('.save-btn').onclick = function() {
        var txt = form.querySelector('textarea').value.trim();
        fetch('/api/feedback', {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json', 'X-Admin-Token': adminToken },
          body: JSON.stringify({ feedbackId: id, reply: txt || null })
        }).then(function(r) {
          if (r.ok) { showToast('Saved'); initFeedback(); }
          else showToast('Failed', true);
        });
      };
      card.appendChild(form);
    }

    function doDelete(id) {
      if (!confirm('Delete?')) return;
      fetch('/api/feedback', {
        method: 'DELETE',
        headers: { 'Content-Type': 'application/json', 'X-Admin-Token': adminToken },
        body: JSON.stringify({ feedbackId: id })
      }).then(function(r) {
        if (r.ok) { showToast('Deleted'); initFeedback(); }
        else showToast('Failed', true);
      });
    }

    // Submit
    input.oninput = function() { charCount.textContent = input.value.length; };
    submitBtn.onclick = function() {
      var c = input.value.trim();
      if (c.length < 3) { showToast('Min 3 chars', true); return; }
      submitBtn.disabled = true;
      fetch('/api/feedback', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: c, username: getUserId() })
      }).then(function(r) { return r.json(); }).then(function(d) {
        submitBtn.disabled = false;
        if (d.success) { showToast('Thanks!'); input.value = ''; charCount.textContent = '0'; initFeedback(); }
        else showToast(d.error || 'Failed', true);
      }).catch(function() { submitBtn.disabled = false; showToast('Error', true); });
    };

    // Init
    async function initFeedback() {
      try {
        var res = await fetch('/api/feedback?_t=' + Date.now());
        var data = await res.json();
        if (!data.success) {
          messagesList.innerHTML = '<p class="empty-state">Failed to load</p>';
          return;
        }
        renderFeedback(data.feedback);
      } catch (e) {
        messagesList.innerHTML = '<p class="empty-state">Network error. Please refresh.</p>';
      }
    }

    // Start
    initAdminMode();
    initFeedback();
  });
  </script>
</body>
</html>




